let Router,profilePicCtrl,multer,path,getUserById;_b8e‍.x([["default",()=>_b8e‍.o]]);_b8e‍.w("koa-router",[["default",["Router"],function(v){Router=v}]]);_b8e‍.w("./profilePic.ctrl",[["*",null,function(v){profilePicCtrl=v}]]);_b8e‍.w("@koa/multer",[["default",["multer"],function(v){multer=v}]]);_b8e‍.w("path",[["default",["path"],function(v){path=v}]]);_b8e‍.w("../../lib/getUserById",[["getUserById",["getUserById"],function(v){getUserById=v}]]);





const profilePic = new Router();

const storage = multer.diskStorage({
    destination:(ctx,file,callback) => {
        callback(null,'../frontend/public/profile');
    },
    filename:(ctx,file,callback) => {
        const extension = path.extname(file.originalname);
        const basename = path.basename(file.originalname, extension);
        callback(null,basename+"_"+Date.now()+extension);
    }
});

const upload = multer({ 
    storage: storage,
    limits: {
        files: 1,
        fileSize: 1024 * 1024 * 1024
    }
});

profilePic.post('/:id', getUserById, upload.single('profile'), profilePicCtrl.saveProfile);
profilePic.delete('/:id', profilePicCtrl.removeProPic);
_b8e‍.d(profilePic);