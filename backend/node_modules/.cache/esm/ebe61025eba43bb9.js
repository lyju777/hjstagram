let ProfilePic;_eba‍.x([["saveProfile",()=>saveProfile],["removeProPic",()=>removeProPic]]);_eba‍.w("../../models/profilepic",[["default",["ProfilePic"],function(v){ProfilePic=v}]]);

//프로필 사진 업로드
       const saveProfile = async (ctx) => {
    try{
        const profilepic = ctx.request.file;

        if(profilepic){

            const profilepics = new ProfilePic({
                originalFileName: profilepic.originalname, 
                serverFileName: profilepic.filename,
                size: profilepic.size,
                path: profilepic.path,
                userid: ctx.state.user._id,
            });

            _eba‍.g.console.log(profilepics);
            _eba‍.g.console.log(profilepic);

            await profilepics.save();
            ctx.body = profilepics;
        }
    }catch(e){
        ctx.throw(500,e);
    }
}

// 프로필 사진 삭제 
       const removeProPic = async (ctx) => {
    const { id } = ctx.params;  
    _eba‍.g.console.log("userid : "+ id);
    try{
        const profile = await ProfilePic.findByUserid(id); 
        const removeid = profile._id;
        await ProfilePic.findByIdAndRemove(removeid).exec();
        ctx.status = 204;
    }catch(e){
        ctx.throw(500,e);
    }
}
