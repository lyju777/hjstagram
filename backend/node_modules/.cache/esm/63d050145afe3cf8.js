let Router,profilePicCtrl,multer,path,getUserById;_5af‍.x([["default",()=>_5af‍.o]]);_5af‍.w("koa-router",[["default",["Router"],function(v){Router=v}]]);_5af‍.w("./profilePic.ctrl",[["*",null,function(v){profilePicCtrl=v}]]);_5af‍.w("@koa/multer",[["default",["multer"],function(v){multer=v}]]);_5af‍.w("path",[["default",["path"],function(v){path=v}]]);_5af‍.w("../../lib/getUserById",[["getUserById",["getUserById"],function(v){getUserById=v}]]);




//프로필 사진
const profilePic = new Router();

const storage = multer.diskStorage({
    destination:(ctx,file,callback) => {
        callback(null,'../frontend/public/profile');
    },
    filename:(ctx,file,callback) => {
        const extension = path.extname(file.originalname);
        const basename = path.basename(file.originalname, extension);
        callback(null,basename+"_"+Date.now()+extension);
    }
});

const upload = multer({ 
    storage: storage,
    limits: {
        files: 1,
        fileSize: 1024 * 1024 * 1024
    }
});

profilePic.post('/:id', getUserById, upload.single('profile'), profilePicCtrl.saveProfile);
profilePic.delete('/:id', profilePicCtrl.removeProPic);
_5af‍.d(profilePic);